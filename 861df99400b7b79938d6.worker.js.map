{"version":3,"sources":["webpack:///webpack/bootstrap 861df99400b7b79938d6","webpack:///./~/correcting-interval/correctingInterval.js","webpack:///./src/modv/palette-worker/Palette.js","webpack:///./src/modv/utils/index.js","webpack:///./src/modv/utils/class-list-contains-all.js","webpack:///./src/modv/utils/class-list-contains-any.js","webpack:///./src/modv/utils/color-to-rgb-string.js","webpack:///./src/modv/utils/for-in.js","webpack:///./src/modv/utils/get-document.js","webpack:///./src/modv/utils/hex-to-rgb.js","webpack:///./src/modv/utils/load-js.js","webpack:///./src/modv/utils/replace-all.js","webpack:///./src/modv/utils/swap-elements.js","webpack:///./src/modv/palette-worker/index.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;AChEA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AAAA;AAAA;AAAA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC,G;;;;;;;ACpED;AACA;AACA,kBAAkB,QAAQ,GAAG,QAAQ,GAAG,QAAQ;AAChD,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,QAAQ,GAAG,QAAQ,GAAG,QAAQ;AACjD,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,sDAAsD;AACtD,sDAAsD;AACtD,sDAAsD;;AAEtD,UAAU;AACV;;AAEA;AACA,8BAA8B,EAAE,UAAU,EAAE,UAAU,EAAE;AACxD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,wBAAwB;AACxB,uBAAuB;AACvB;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;ACrJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAYA;;;;;;;;ACpBA;;AAEA;AACA,WAAW,QAAQ;AACnB,WAAW,cAAc;AACzB,YAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,YAAY;AACZ;AACA;;AAEA,iBAAiB,uBAAuB;AACxC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;;AC/BA;AACA,WAAW,QAAQ;AACnB,WAAW,cAAc;AACzB,YAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,YAAY;AACZ;AACA;;AAEA,iBAAiB,uBAAuB;AACxC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;;AC7BA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;AACA,kBAAkB,SAAS,GAAG,SAAS,GAAG,SAAS;AACnD,GAAG;AACH;AACA;AACA;;AAEA;;;;;;;;ACbA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,EAAE;AACb;;AAEA;AACA,WAAW,OAAO;AAClB,WAAW,cAAc;AACzB;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;;;;;;;AChBA;AACA;AACA,WAAW,UAAU;AACrB;;AAEA;AACA,WAAW,OAAO;AAClB,WAAW,oBAAoB;AAC/B;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;;;;;;ACrBA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA,8BAA8B,EAAE,UAAU,EAAE,UAAU,EAAE;AACxD;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;ACfA;AACA,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;;;;;;;;ACtBA,uDAAuD;AACvD;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;AClBA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;AC3BA;AAAA;;AAEA;AACA;AACgB;;AAEhB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA","file":"861df99400b7b79938d6.worker.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 12);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 861df99400b7b79938d6","/*! correcting-interval 2.0.0 | Copyright 2014 Andrew Duthie | MIT License */\n/* jshint evil: true */\n;(function(global, factory) {\n  // Use UMD pattern to expose exported functions\n  if (typeof exports === 'object') {\n    // Expose to Node.js\n    module.exports = factory();\n  } else if (typeof define === 'function' && define.amd) {\n    // Expose to RequireJS\n    define([], factory);\n  }\n\n  // Expose to global object (likely browser window)\n  var exports = factory();\n  for (var prop in exports) {\n    global[prop] = exports[prop];\n  }\n}(this, function() {\n  // Track running intervals\n  var numIntervals = 0,\n    intervals = {};\n\n  // Polyfill Date.now\n  var now = Date.now || function() {\n    return new Date().valueOf();\n  };\n\n  var setCorrectingInterval = function(func, delay) {\n    var id = numIntervals++,\n      planned = now() + delay;\n\n    // Normalize func as function\n    switch (typeof func) {\n      case 'function':\n        break;\n      case 'string':\n        var sFunc = func;\n        func = function() {\n          eval(sFunc);\n        };\n        break;\n      default:\n        func = function() { };\n    }\n\n    function tick() {\n      func();\n\n      // Only re-register if clearCorrectingInterval was not called during function\n      if (intervals[id]) {\n        planned += delay;\n        intervals[id] = setTimeout(tick, planned - now());\n      }\n    }\n\n    intervals[id] = setTimeout(tick, delay);\n    return id;\n  };\n\n  var clearCorrectingInterval = function(id) {\n    clearTimeout(intervals[id]);\n    delete intervals[id];\n  };\n\n  return {\n    setCorrectingInterval: setCorrectingInterval,\n    clearCorrectingInterval: clearCorrectingInterval\n  };\n}));\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/correcting-interval/correctingInterval.js\n// module id = 0\n// module chunks = 0","function colorToRgbString(color) {\n  try {\n    return `rgb(${color.r},${color.g},${color.b})`;\n  } catch (e) {\n    return 'rgb(0,0,0)';\n  }\n}\n\nfunction colorToRgbaString(color) {\n  try {\n    return `rgba(${color.r},${color.g},${color.b},1)`;\n  } catch (e) {\n    return 'rgba(0,0,0,1)';\n  }\n}\n\nfunction calculateStep(colors, currentColor, currentTime, timePeriod) {\n  let r1;\n  let g1;\n  let b1;\n\n  try {\n    r1 = colors[currentColor].r;\n    g1 = colors[currentColor].g;\n    b1 = colors[currentColor].b;\n  } catch (e) {\n    // try catch because the user may delete the\n    // current color which throws the array and nextIndex out of sync\n    // TODO: fix case where user deletes current color\n    return [0, 0, 0];\n  }\n\n  let nextColor = currentColor + 1;\n\n  if (nextColor > colors.length - 1) {\n    nextColor = 0;\n  }\n\n  const r2 = colors[nextColor].r;\n  const g2 = colors[nextColor].g;\n  const b2 = colors[nextColor].b;\n\n  const p = currentTime / (timePeriod - 1);\n  const r = Math.round((1.0 - p) * r1 + p * r2 + 0.5); // eslint-disable-line\n  const g = Math.round((1.0 - p) * g1 + p * g2 + 0.5); // eslint-disable-line\n  const b = Math.round((1.0 - p) * b1 + p * b2 + 0.5); // eslint-disable-line\n\n  return { r, g, b, a: 1 };\n}\n\nfunction hexToRgb(hex) {\n  const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n  return result ? [\n    parseInt(result[1], 16),\n    parseInt(result[2], 16),\n    parseInt(result[3], 16),\n  ] : null;\n}\n\nfunction Palette(colorsIn, timePeriod, id, returnFormat) {\n  this.bpm = 120;\n  this.useBpm = false;\n  this.bpmDivision = 16;\n  this.creationTime = Date.now();\n  this.returnFormat = returnFormat;\n\n  const stringed = JSON.stringify(colorsIn);\n\n  this.colors = JSON.parse(stringed) || [];\n  this.timePeriod = timePeriod || 100;\n\n  this.currentColor = 0; // jshint ignore:line\n  this.currentTime = 0; // jshint ignore:line\n  // this.timePeriod = Math.round((this.timePeriod/1000) * 60);\n\n  this.getId = function getId() {\n    return id;\n  };\n}\n\nPalette.prototype.addColor = function addColor(color) {\n  let rgbFromHex;\n  if (typeof color === 'string') {\n    rgbFromHex = hexToRgb(color);\n    this.colors.push(rgbFromHex);\n  } else if (Array.isArray(color.constructor)) {\n    this.colors.push(rgbFromHex);\n  } else return false;\n\n  return this.colors.length;\n};\n\nPalette.prototype.getColors = function getColors() {\n  return this.colors;\n};\n\nPalette.prototype.removeAtIndex = function removeAtIndex(index) {\n  const returnVal = this.colors.splice(index, 1);\n  return returnVal;\n};\n\nPalette.prototype.nextStep = function nextStep(cb) {\n  if (this.useBpm) {\n    // fps * 60 seconds / bpm / BpmDiv\n    this.timePeriod = (((60 * 60) / this.bpm) * this.bpmDivision);\n  }\n\n  if (this.colors.length < 1) {\n    // If there are no colors, return false\n    return false;\n  } else if (this.colors.length < 2) {\n    // If there are less than two colors, just return the only color\n    return colorToRgbString(this.colors[0]);\n  }\n\n  this.currentTime += (1000 / 60);\n\n  if (this.currentTime >= this.timePeriod) {\n    if (this.currentColor > this.colors.length - 2) {\n      this.currentColor = 0;\n    } else {\n      this.currentColor += 1;\n    }\n    this.currentTime = 0;\n  }\n\n  const step = calculateStep(this.colors, this.currentColor, this.currentTime, this.timePeriod);\n  let returned = '';\n\n  if (this.returnFormat === 'rgbaString') {\n    returned = colorToRgbaString(step);\n  } else {\n    returned = colorToRgbString(step);\n  }\n\n  cb(returned);\n  return returned;\n};\n\nPalette.prototype.update = function update() {\n  return new Promise((resolve) => {\n    this.nextStep(resolve);\n  });\n};\n\nPalette.prototype.setTimePeriod = function setTimePeriod() {\n  // TODO: sets time period and updates current time period if old is greater than new\n};\n\nexport default Palette;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/modv/palette-worker/Palette.js\n// module id = 1\n// module chunks = 0","import classListContainsAll from './class-list-contains-all';\nimport classListContainsAny from './class-list-contains-any';\nimport colorToRGBString from './color-to-rgb-string';\nimport forIn from './for-in';\nimport getDocument from './get-document';\nimport hexToRgb from './hex-to-rgb';\nimport loadJS from './load-js';\nimport replaceAll from './replace-all';\nimport swapElements from './swap-elements';\n\nexport {\n  classListContainsAll,\n  classListContainsAny,\n  colorToRGBString,\n  forIn,\n  getDocument,\n  hexToRgb,\n  loadJS,\n  replaceAll,\n  swapElements,\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/modv/utils/index.js\n// module id = 2\n// module chunks = 0","/** @module utils */\n\n/**\n * @param {Element} node\n * @param {Array<string>} classNames\n * @return {boolean}\n */\nfunction classListContainsAll(node, classNames) {\n  if (!node || !classNames || !(typeof node.classList.value === 'string')) {\n    return false;\n  }\n\n  if (!Array.isArray(classNames)) {\n    throw new Error('2nd argument must be Array');\n  }\n\n  /**\n   * List of element classnames, separated by a space\n   * @type {string}\n   */\n  const nodeClassName = node.classList.value;\n\n  for (let i = 0; i < classNames.length; i += 1) {\n    if (!nodeClassName.includes(classNames[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport default classListContainsAll;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/modv/utils/class-list-contains-all.js\n// module id = 3\n// module chunks = 0","/**\n * @param {Element} node\n * @param {Array<string>} classNames\n * @return {boolean}\n */\nfunction classListContainsAny(node, classNames) {\n  if (!node || !classNames || !(typeof node.classList.value === 'string')) {\n    return false;\n  }\n\n  if (!Array.isArray(classNames)) {\n    throw new Error('2nd argument must be Array');\n  }\n\n  /**\n   * List of element classnames, separated by a space\n   * @type {string}\n   */\n  const classList = node.classList.value;\n\n  for (let i = 0; i < classNames.length; i += 1) {\n    if (classList.includes(classNames[i])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nexport default classListContainsAny;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/modv/utils/class-list-contains-any.js\n// module id = 4\n// module chunks = 0","/**\n * @todo Try-Catch is bad, needs to rewrite\n * @param {Object} color\n * @return {string}\n */\nfunction colorToRGBString(color) {\n  try {\n    return `rgb(${color[0]},${color[1]},${color[2]})`;\n  } catch (e) {\n    return 'rgb(0,0,0)';\n  }\n}\n\nexport default colorToRGBString;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/modv/utils/color-to-rgb-string.js\n// module id = 5\n// module chunks = 0","/**\n * @callback forInCallback\n * @param {string} key\n * @param {*} value\n */\n\n/**\n * @param {Object} item\n * @param {forInCallback} callback\n */\nfunction forIn(item, callback) {\n  Object.keys(item).forEach((name) => {\n    callback(name, item[name]);\n  });\n}\n\nexport default forIn;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/modv/utils/for-in.js\n// module id = 6\n// module chunks = 0","/**\n * @callback getDocumentCallback\n * @param {?Document} XML or HTML Document\n */\n\n/**\n * @param {string} url\n * @param {getDocumentCallback} callback\n */\nfunction getDocument(url, callback) {\n  const xhr = new XMLHttpRequest();\n\n  xhr.onload = () => {\n    callback(xhr.responseXML);\n  };\n\n  xhr.open('GET', url);\n  xhr.responseType = 'document';\n  xhr.send();\n}\n\nexport default getDocument;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/modv/utils/get-document.js\n// module id = 7\n// module chunks = 0","/**\n * @todo We can make a common Color type with getHex etc methods (safe and easy to use)\n * Modified from: http://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb\n * @param {string} hex\n * @return {?Array<number>}\n */\nfunction hexToRgb(hex) {\n  const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n  return result ? [\n    parseInt(result[1], 16),\n    parseInt(result[2], 16),\n    parseInt(result[3], 16),\n  ] : null;\n}\n\nexport default hexToRgb;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/modv/utils/hex-to-rgb.js\n// module id = 8\n// module chunks = 0","/**\n * @param {string} url\n * @param {Element} targetElement Element in which script is inserted\n * @param {Module} module\n * @return {Promise}\n */\nfunction loadJS(url, targetElement = document.body, module) {\n  return new Promise((resolve) => {\n    const scriptTag = document.createElement('script');\n\n    scriptTag.onload = () => {\n      resolve(module);\n    };\n    scriptTag.onreadystatechange = () => {\n      resolve(module);\n    };\n\n    scriptTag.src = url;\n    targetElement.appendChild(scriptTag);\n  });\n}\n\nexport default loadJS;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/modv/utils/load-js.js\n// module id = 9\n// module chunks = 0","const REPLACE_ALL_STR1_REGEXP = new RegExp(/([/,!\\\\^${}[\\]().*+?|<>\\-&])/g);\nconst REPLACE_ALL_STR2_REGEXP = new RegExp(/\\$/g);\n\n/**\n * http://dumpsite.com/forum/index.php?topic=4.msg8#msg8\n * @param {string} source\n * @param {string} str1\n * @param {string} str2\n * @param {boolean} ignoreCase\n * @return {string}\n */\nfunction replaceAll(source, str1, str2, ignoreCase = false) {\n  const str1ReplaceRegexpFlag = ignoreCase ? 'gi' : 'g';\n  const regexp = new RegExp(str1.replace(REPLACE_ALL_STR1_REGEXP, '\\\\$&'), str1ReplaceRegexpFlag);\n  const formattedStr2 = (typeof str2 === 'string') ? str2.replace(REPLACE_ALL_STR2_REGEXP, '$$$$') : str2;\n  return source.replace(regexp, formattedStr2);\n}\n\nexport default replaceAll;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/modv/utils/replace-all.js\n// module id = 10\n// module chunks = 0","/**\n * @param {Element} obj1\n * @param {Element} obj2\n */\nfunction swapElements(obj1, obj2) {\n  // save the location of obj2\n  const parent2 = obj2.parentNode;\n  const next2 = obj2.nextSibling;\n  // special case for obj1 is the next sibling of obj2\n  if (next2 === obj1) {\n    // just put obj1 before obj2\n    parent2.insertBefore(obj1, obj2);\n  } else {\n    // insert obj2 right before obj1\n    obj1.parentNode.insertBefore(obj2, obj1);\n\n    // now insert obj1 where obj2 was\n    if (next2) {\n      // if there was an element after obj2, then insert obj1 right before that\n      parent2.insertBefore(obj1, next2);\n    } else {\n      // otherwise, just append as last child\n      parent2.appendChild(obj1);\n    }\n  }\n}\n\nexport default swapElements;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/modv/utils/swap-elements.js\n// module id = 11\n// module chunks = 0","/* eslint-env worker */\n\nimport ci from 'correcting-interval';\nimport Palette from './Palette';\nimport { forIn } from '../utils';\n\nlet timer;\nconst palettes = new Map();\nself.palettes = palettes;\n\nfunction createPalette(colors, duration, id) {\n  const pal = new Palette(colors, duration, id);\n  palettes.set(id, pal);\n  postMessage({\n    message: 'palette-create',\n    paletteId: pal.getId(),\n  });\n}\n\nfunction setPalette(id, data) {\n  const pal = palettes.get(id);\n\n  forIn(data, (key, item) => {\n    pal[key] = item;\n  });\n\n  palettes.set(id, pal);\n}\n\nfunction removePalette(id) {\n  palettes.delete(id);\n}\n\nfunction loop() {\n  palettes.forEach((palette) => {\n    palette.update().then((step) => {\n      postMessage({\n        message: 'palette-update',\n        paletteId: palette.getId(),\n        currentStep: step,\n        currentColor: palette.currentColor,\n      });\n    });\n  });\n}\n\nonmessage = function onmessage(e) {\n  if (!('message' in e.data)) return;\n\n  if (e.data.message === 'create-palette') {\n    createPalette(e.data.colors, e.data.duration, e.data.paletteId, e.data.returnFormat);\n  }\n\n  if (e.data.message === 'set-palette') {\n    setPalette(e.data.paletteId, e.data.options);\n  }\n\n  if (e.data.message === 'remove-palette') {\n    removePalette(e.data.paletteId);\n  }\n\n  if (e.data.message === 'stop-loop') {\n    ci.clearCorrectingInterval(timer);\n    timer = undefined;\n  }\n\n  if (e.data.message === 'start-loop') {\n    if (timer === undefined) ci.setCorrectingInterval(loop, 1000 / 60);\n  }\n};\n\nif (timer === undefined) ci.setCorrectingInterval(loop, 1000 / 60);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/eslint-loader?{}!./src/modv/palette-worker/index.js\n// module id = 12\n// module chunks = 0"],"sourceRoot":""}